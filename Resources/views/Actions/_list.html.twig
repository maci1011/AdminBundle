
{% if type is not defined or not type in ['list', 'relation', 'add', 'set'] %}
{% set type = 'list' %}
{% endif %}

{% if multipleArrayViews is not defined %}
{% set multipleArrayViews = ['list', 'add'] %}
{% endif %}

{% set list = pager.pageList %}

{% if list|length %}

<div class="list list-default list-type-{{ type }}" {% if sortable and 1 < list|length and not type in ['add, set'] %}sortable="{{ sortable }}"{% endif %}>
<table class="table table-striped">

<thead>

<tr class="list-header">

	{% if type in multipleArrayViews %}
	<th class="list-header">&nbsp;</th>
	{% endif %}

	{% for field in fields %}

	{% if field == 'id' %}
	<th class="list-header id">
		<span class="list-title">Id</span>
	</th>
	{% elseif field == '_preview' %}
	<th class="list-header _preview">
		<span class="list-title">Preview</span>
	</th>
	{% elseif field == '_string' %}
	<th class="list-header name">
		<span class="list-title">Name</span>
	</th>
	{% else %}
	<th class="list-header {{ field }}">
		<span class="list-title">{{ field|capitalize }}</span>
	</th>
	{% endif %}

	{% endfor %}

	{% if type is not defined or type == 'list' %}
	<th class="list-header-last list-header-actions">
		<span class="list-title">Actions</span>
	</th>
	{% elseif type == 'relation' %}
	<th class="list-header-last list-header-remove">
		<span class="list-title">Remove Item</span>
	</th>
	{% elseif type == 'set' %}
	<th class="list-header-last list-header-set">
		<span class="list-title">Set Item</span>
	</th>
	{% endif %}

</tr>

{% if type in multipleArrayViews %}
<tr class="multipleActionsBar">
	<td>
		<nav>
			<ul class="nav navbar-nav">

				<li>
					<p class="navbar-text">
						<span class="glyphicon glyphicon-ok-circle"></span>
					</p>
				</li>

				<li>
					<a class="action select-all" href="#">
						<span class="glyphicon glyphicon-ok"></span>
						Select All
					</a>
				</li>

				<li>
					<a class="action deselect-all" href="#">
						<span class="glyphicon glyphicon-unchecked"></span>
						Deselect All
					</a>
				</li>

				{% if type == 'list' %}

				<li>
					<a class="action remove" confirm="Are you sure to remove %items% items?" href="{{ path('maci_admin_view', { 'section': section, 'entity': entity, 'action': 'remove' }) }}">
						<span class="glyphicon glyphicon-remove"></span>
						Remove
					</a>
				</li>

				{% elseif type == 'add' %}

				<li>
					<a class="action btn-primary" confirm="Are you sure to add %items% items?" href="#">
						<span class="glyphicon glyphicon-plus"></span>
						Add Items
					</a>
				</li>

				{#} ,'relation'
				{% elseif type == 'relation' %}

				<li>
					<a href="#">
						<span class="glyphicon glyphicon-remove"></span>
						Relation Remove
					</a>
				</li>
				{#}

				{% endif %}

			</ul>
		</nav>
	</td>
</tr>
{% endif %}

</thead>

<tbody>
{% for item in list %}

	{% include "MaciAdminBundle:Actions:_list_item.html.twig" %}

{% endfor %}
</tbody>

</table>
</div>

{% if pager.requiresPagination() %}
<div class="container-fluid">
<ul class="pagination">
	<li {% if not pager.hasPrev() %}class="disabled"{% endif %}>
		<a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge({ "page": pager.prev })) }}">«</a>
	</li>
	{% for page in pager.getPageRange() %}
    	<li {% if pager.current(page) %}class="active"{% endif %}>
    		<a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge({ "page": page })) }}">{{ page }}</a>
    	</li>
	{% endfor %}
	<li {% if not pager.hasNext() %}class="disabled"{% endif %}>
		<a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge({ "page": pager.next })) }}">»</a>
	</li>
</ul>
</div>
{% endif %}

{% else %}

<div class="container-fluid">
	<span class="navbar-text noitems">No Items.</span>
</div>

{% endif %}
